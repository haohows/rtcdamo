(function(){"use strict";var t={8097:function(t,n,e){var o=e(6848),r=function(){var t=this,n=t._self._c;return n("div",[n("h1",[t._v("音訊聊天室")]),n("p",[t._v("Your ID: "+t._s(t.myId))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.targetId,expression:"targetId"}],attrs:{placeholder:"輸入對方的 ID"},domProps:{value:t.targetId},on:{input:function(n){n.target.composing||(t.targetId=n.target.value)}}}),n("button",{on:{click:t.connectToPeer}},[t._v("連接")]),n("button",{on:{click:t.startAudioChat}},[t._v("開始聊天")]),n("button",{on:{click:t.stopAudioChat}},[t._v("結束聊天")])])},i=[],a=(e(8992),e(3949),e(4933)),u={data(){return{peer:null,conn:null,mediaConnection:null,myId:null,targetId:"",localStream:null}},mounted(){this.peer=new a.Ay,this.peer.on("open",(t=>{this.myId=t})),this.peer.on("call",(t=>{navigator.mediaDevices.getUserMedia({audio:!0}).then((n=>{t.answer(n),t.on("stream",(t=>{this.playAudio(t)}))}))}))},methods:{connectToPeer(){this.conn=this.peer.connect(this.targetId),this.conn.on("open",(()=>{console.log("已連接到對方！")}))},startAudioChat(){navigator.mediaDevices.getUserMedia({audio:!0}).then((t=>{this.localStream=t;const n=this.peer.call(this.targetId,t);n.on("stream",(t=>{this.playAudio(t)})),this.mediaConnection=n}))},stopAudioChat(){this.mediaConnection&&this.mediaConnection.close(),this.localStream&&this.localStream.getTracks().forEach((t=>t.stop()))},playAudio(t){const n=new Audio;n.srcObject=t,n.play()}}},c=u,l=e(1656),s=(0,l.A)(c,r,i,!1,null,null,null),d=s.exports;o.Ay.config.productionTip=!1,new o.Ay({render:t=>t(d)}).$mount("#app")}},n={};function e(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={exports:{}};return t[o].call(i.exports,i,i.exports,e),i.exports}e.m=t,function(){var t=[];e.O=function(n,o,r,i){if(!o){var a=1/0;for(s=0;s<t.length;s++){o=t[s][0],r=t[s][1],i=t[s][2];for(var u=!0,c=0;c<o.length;c++)(!1&i||a>=i)&&Object.keys(e.O).every((function(t){return e.O[t](o[c])}))?o.splice(c--,1):(u=!1,i<a&&(a=i));if(u){t.splice(s--,1);var l=r();void 0!==l&&(n=l)}}return n}i=i||0;for(var s=t.length;s>0&&t[s-1][2]>i;s--)t[s]=t[s-1];t[s]=[o,r,i]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};e.O.j=function(n){return 0===t[n]};var n=function(n,o){var r,i,a=o[0],u=o[1],c=o[2],l=0;if(a.some((function(n){return 0!==t[n]}))){for(r in u)e.o(u,r)&&(e.m[r]=u[r]);if(c)var s=c(e)}for(n&&n(o);l<a.length;l++)i=a[l],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(s)},o=self["webpackChunkrtctest"]=self["webpackChunkrtctest"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=e.O(void 0,[504],(function(){return e(8097)}));o=e.O(o)})();
//# sourceMappingURL=app.e71b29c8.js.map